{% load static %}

<div class="book-col mb-3">
  <div class="book-card-new h-100">

    <div class="book-cover-wrapper">
      {% if book.cover %}
        <img src="{{ book.cover.url }}" alt="{{ book.title }}">
      {% else %}
      <img src="{% static 'images/default-book-cover.png' %}" alt="{{ book.title }}">
      {% endif %}
    </div>

    <div class="book-card-body d-flex flex-column">

      <h5 class="book-card-title">{{ book.title }}</h5>

      {% if show_author != False %}
        <p class="book-card-author text-muted small mb-2">
          {% for author in book.authors.all %}
            <a href="{% url 'books:author_detail' author.slug %}" class="text-muted">
              {{ author.name }}
            </a>{% if not forloop.last %}, {% endif %}
          {% empty %}
            <span class="text-muted">Автор не указан</span>
          {% endfor %}
        </p>
      {% endif %}

      {% if show_stats != False %}
        <p class="book-card-stats small text-muted mb-2">
          {% if show_views == True %}
            Просмотрено: {{ book.view_logs.count|default:"0" }} ·
          {% endif %}
          Скачано: {{ book.unique_downloads|default:"0" }}
        </p>
      {% endif %}

      <a href="{% url 'books:detail' book.pk %}"
         class="mt-auto btn-new btn-new-dark">
        {{ button_text|default:"Узнать о книге" }}
      </a>
    </div>
  </div>
</div>


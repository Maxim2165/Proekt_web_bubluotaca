{% comment %}
  –ï–¥–∏–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ –≤—Å–µ–º—É —Å–∞–π—Ç—É
  
  –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - book: –æ–±—ä–µ–∫—Ç Book (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - show_author: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∞–≤—Ç–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True, –ø–µ—Ä–µ–¥–∞—Ç—å False —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å)
  - show_stats: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True, –ø–µ—Ä–µ–¥–∞—Ç—å False —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å)
  - show_views: –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é False, –ø–µ—Ä–µ–¥–∞—Ç—å True —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å)
  - button_text: —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "–û—Ç–∫—Ä—ã—Ç—å")
  - button_class: CSS –∫–ª–∞—Å—Å –∫–Ω–æ–ø–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "btn-primary")
{% endcomment %}

{% load static %}

<div class="col-md-4 mb-3">
  <div class="card h-100">
    
    <div class="book-cover-wrapper">
      {% if book.cover %}
        <img src="{{ book.cover.url }}" alt="{{ book.title }}">
      {% else %}
        <span class="text-muted small">–ù–µ—Ç –æ–±–ª–æ–∂–∫–∏</span>
      {% endif %}
    </div>

    <div class="card-body d-flex flex-column">
      
      <h5 class="card-title">{{ book.title }}</h5>

      {% if show_author != False %}
        <p class="card-text text-muted small mb-2">
          {% for author in book.authors.all %}
            <a href="{% url 'books:author_detail' author.slug %}" class="text-muted">
              {{ author.name }}
            </a>{% if not forloop.last %}, {% endif %}
          {% empty %}
            <span class="text-muted">–ê–≤—Ç–æ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω</span>
          {% endfor %}
        </p>
      {% endif %}

      {% if show_stats != False %}
        <p class="card-text small text-muted mb-2">
          {% if show_views == True %}
            üëÅ {{ book.views_count }} ¬∑ 
          {% endif %}
          ‚¨á {{ book.downloads_count }}
        </p>
      {% endif %}

      <a href="{% url 'books:detail' book.pk %}"
         class="mt-auto btn {{ button_class|default:'btn-primary' }}">
        {{ button_text|default:"–û—Ç–∫—Ä—ã—Ç—å" }}
      </a>
      
    </div>
  </div>
</div>


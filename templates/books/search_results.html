{% extends "base.html" %}
{% block title %}–ü–æ–∏—Å–∫{% endblock %}

{% block content %}
<h1 class="mb-4">–ü–æ–∏—Å–∫</h1>
{% if query %}
  <div class="mb-3 text-muted">
    üîé –ù–∞–π–¥–µ–Ω–æ:
    {% if authors %} ‚úçÔ∏è –ê–≤—Ç–æ—Ä–æ–≤: {{ authors|length }}{% endif %}
    {% if genres %}{% if authors %} ¬∑ {% endif %}üè∑ –ñ–∞–Ω—Ä–æ–≤: {{ genres|length }}{% endif %}
    {% if books %}{% if authors or genres %} ¬∑ {% endif %}üìö –ö–Ω–∏–≥: {{ books|length }}{% endif %}
  </div>
{% endif %}
<form method="get" action="{% url 'search:search' %}" class="mb-4">
  <div class="input-group input-group-lg">
    <input
      type="search"
      name="q"
      class="form-control"
      placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏, –∞–≤—Ç–æ—Ä–∞ –∏–ª–∏ –∂–∞–Ω—Ä–∞"
      value="{{ query }}"
      autofocus
    >
    <div class="input-group-append">
      <button class="btn btn-primary" type="submit">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </div>
</form>

{% if query %}

  {% if authors %}
    <h3 class="mt-4">‚úçÔ∏è –ê–≤—Ç–æ—Ä—ã</h3>
    <ul>
      {% for author in authors %}
        <li>
          <a href="{% url 'books:author_detail' author.slug %}">
            {{ author.name }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

{% if genres %}
  <h3 class="mt-4">üè∑ –ñ–∞–Ω—Ä—ã</h3>
  <ul>
    {% for genre in genres %}
      <li>
        <a href="{% url 'books:genre_detail' genre.slug %}">
          {{ genre.name }}
        </a>
      </li>
    {% endfor %}
  </ul>
{% endif %}

  {% if books %}
    <h3 class="mt-4">üìö –ö–Ω–∏–≥–∏</h3>
    <div class="row">
      {% for book in books %}
        {% include "books/includes/book_card.html" with book=book %}
      {% endfor %}
    </div>
  {% endif %}

  {% if not books and not authors and not genres %}
    <p class="text-muted mt-4">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
  {% endif %}

{% endif %}
{% endblock %}

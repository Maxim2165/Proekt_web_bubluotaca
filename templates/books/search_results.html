{% extends "base.html" %}
{% block title %}–ü–æ–∏—Å–∫{% endblock %}
{% load static %}
{% block content %}

  <div class="search-container">

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <p class="search-subtitle">
      –ü–æ–∏—Å–∫ —ç—Ç–æ —Å–ø–æ—Å–æ–± –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –∫–Ω–∏–≥—É, –∂–∞–Ω—Ä –∏–ª–∏ –∞–≤—Ç–æ—Ä–∞ —Å—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–µ–∫—Å—Ç–æ–≤. –í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –∏ –ø–µ—Ä–µ–¥ –≤–∞–º–∏ –æ—Ç–∫—Ä–æ—é—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏–º–µ–Ω–∞ –∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤–æ–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ.
    </p>

    <!-- –°—Ç—Ä–æ–∫–∞ "–ù–∞–π–¥–µ–Ω–æ" ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–∞–π–¥–µ–Ω–æ -->
        {% if authors or genres or books %}
          <div class="search-summary">
            üîé –ù–∞–π–¥–µ–Ω–æ:
            {% if authors %} ‚úçÔ∏è –ê–≤—Ç–æ—Ä–æ–≤: {{ authors|length }}{% endif %}
            {% if genres %}{% if authors %} ¬∑ {% endif %}üè∑Ô∏è –ñ–∞–Ω—Ä–æ–≤: {{ genres|length }}{% endif %}
            {% if books %}{% if authors or genres %} ¬∑ {% endif %}üìö –ö–Ω–∏–≥: {{ books|length }}{% endif %}
          </div>
        {% endif %}

    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ (–±–µ–ª–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞) -->
<div class="search-form-card">
  <form method="get" action="{% url 'search:search' %}" class="search-form">
    <div class="search-input-wrapper">
      <input
        type="search"
        name="q"
        class="search-input"
        placeholder="–ù–∞—á–Ω–∏—Ç–µ –∏—Å–∫–∞—Ç—å —Å–µ–π—á–∞—Å"
        value="{{ query }}"
        autofocus
      >
      <button type="submit" class="search-icon-btn">
        <img src="{% static 'images/Search Icon.svg' %}" alt="–ü–æ–∏—Å–∫" class="search-icon">
      </button>
    </div>
  </form>
</div>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    {% if query %}
      <div class="search-results">

        {% if authors %}
          <div class="search-section">
            <h2 class="search-section-title">–ê–≤—Ç–æ—Ä—ã</h2>
            <ul class="search-list">
              {% for author in authors %}
                <li>
                  <a href="{% url 'books:author_detail' author.slug %}">
                    {{ author.name }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        {% if genres %}
          <div class="search-section">
            <h2 class="search-section-title">–ñ–∞–Ω—Ä—ã</h2>
            <ul class="search-list">
              {% for genre in genres %}
                <li>
                  <a href="{% url 'books:genre_detail' genre.slug %}">
                    {{ genre.name }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        {% if books %}
          <div class="search-section">
            <h2 class="search-section-title">–ö–Ω–∏–≥–∏</h2>
            <div class="books-grid">
              {% for book in books %}
                {% include "books/includes/book_card.html" with book=book show_author=True show_stats=True show_views=False %}
              {% endfor %}
            </div>
          </div>
        {% endif %}

        {% if not authors and not genres and not books %}
          <p class="search-no-results">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É ¬´{{ query }}¬ª.</p>
        {% endif %}

      </div>
    {% endif %}

  </div>

{% endblock %}